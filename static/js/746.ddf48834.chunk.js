"use strict";(self.webpackChunksocial_network_app=self.webpackChunksocial_network_app||[]).push([[746],{746:(e,s,t)=>{t.r(s),t.d(s,{default:()=>A});var r=t(43),n=t(945),l=t(835);const a=e=>e.users.users,o=e=>e.users.totalCount,i=e=>e.users.count,_=e=>e.users.page,c=e=>e.users.usersStatus,u=e=>e.users.usersErrorMessage,d=e=>e.users.followStatus,m=e=>e.users.followErrorMessage,g=e=>e.users.unFollowStatus,p=e=>e.users.unFollowErrorMessage,f=e=>e.users.following,v=e=>e.users.friendFilter,h=e=>e.users.termFilter,x={users:"Users_users__EpYjI",dark:"Users_dark__w27hk",users__bottom:"Users_users__bottom__hdrcg",users__no:"Users_users__no__onzFj",users__loading:"Users_users__loading__xr0+s",light:"Users_light__3IhBZ",user:"Users_user__mEsSY",user__image:"Users_user__image__C7yXI",user__info:"Users_user__info__uL1vV",user__name:"Users_user__name__PoMEO",user__follow:"Users_user__follow__t7vMK",loading:"Users_loading__BqfbN",user__unFollow:"Users_user__unFollow__Q-dSK",paginator:"Users_paginator__mUHAo",paginator__pages:"Users_paginator__pages__gYAHI",paginator__page:"Users_paginator__page__Qk4up",active:"Users_active__4K4uz",paginator__button:"Users_paginator__button__Kuw1i",paginator__button_prev:"Users_paginator__button_prev__ZyiWk",disabled:"Users_disabled__mh0ZP",paginator__button_next:"Users_paginator__button_next__169Tm",select__friend:"Users_select__friend__J+Cwb",selectWrapper:"Users_selectWrapper__h53fF",arrow:"Users_arrow__KjMm+",placeholder:"Users_placeholder__5pYBu",select__list:"Users_select__list__IYlmx",option:"Users_option__L5cPN",select__count:"Users_select__count__DDsQE","form-users":"Users_form-users__7flVd","form-users__column":"Users_form-users__column__Mg1yv","form-users__input":"Users_form-users__input__4chH9","form-users__button":"Users_form-users__button__DefvQ"};var j=t(587),w=t(139),k=t.n(w),b=t(910),N=t(929);const U=["(max-width: 992.98px)","(max-width: 767.98px)","(max-width: 479.98px)"];var E=t(569),S=t(579);const C=(0,r.memo)((e=>{let{pages:s,handleSetPage:t,currentPage:n}=e;const l=(0,r.useContext)(E.D),{md3:a}=(()=>{const e=U.map((e=>matchMedia(e))),s=e.map((e=>e.matches)),[t,n]=(0,r.useState)(s);return(0,r.useLayoutEffect)((()=>{const t=()=>n(s);return e.forEach((e=>e.addEventListener("change",t))),()=>{e.forEach((e=>e.removeEventListener("change",t)))}})),{md2:t[0],md3:t[1],md4:t[2]}})();let o=10;a&&(o=5);const i=s.length,[_,c]=(0,r.useState)(1),[u,d]=(0,r.useState)([]);(0,r.useEffect)((()=>{(e=>{let s=[];for(let t=e;t<Math.min(e+o,i+1);t++)s.push(t);d(s)})(_)}),[_,i,o]);let m=k()(x.paginator__button,x.paginator__button_prev,{[x.disabled]:1===_}),g=k()(x.paginator__button,x.paginator__button_next,{[x.disabled]:_+o>i}),p=k()(x.paginator,{[x.light]:"light"===l,[x.dark]:"dark"===l});return(0,S.jsxs)("div",{className:p,children:[(0,S.jsx)("div",{className:x.paginator__prev,children:(0,S.jsx)(b.g,{className:m,icon:N.K5S,size:"2x",onClick:()=>{_>1&&c((e=>e-o))}})}),(0,S.jsx)("div",{className:x.paginator__pages,children:u.map((e=>{const s=n===e;let r=k()(x.paginator__page,{[x.active]:s});return(0,S.jsx)("div",{className:r,onClick:()=>t(e),children:(0,S.jsx)("span",{children:e})},e)}))}),(0,S.jsx)("div",{className:x.paginator__next,children:(0,S.jsx)(b.g,{className:g,icon:N.HKD,size:"2x",onClick:()=>{_+o<=i&&c((e=>e+o))}})})]})}));var y=t(216),G=t(605),L=t(38);const I=e=>{var s,t;let{user:a,followingId:o}=e;const i=(0,r.useContext)(E.D),_=(0,n.G)(L.jb),c=(0,n.j)(),u=(0,y.Zp)();let d=k()(x.user,{[x.light]:"light"===i,[x.dark]:"dark"===i});return(0,S.jsxs)("div",{className:d,children:[(0,S.jsx)("div",{className:x.user__image,onClick:()=>{return e=a.id,void u("/profile/".concat(e),{replace:!0});var e},children:null!==a&&void 0!==a&&null!==(s=a.photos)&&void 0!==s&&s.small?(0,S.jsx)("img",{src:null===a||void 0===a||null===(t=a.photos)||void 0===t?void 0:t.small,alt:""}):(0,S.jsx)("img",{src:G,alt:""})}),(0,S.jsxs)("div",{className:x.user__info,children:[(0,S.jsx)("div",{className:x.user__name,children:a.name}),a.followed&&_&&(0,S.jsx)("button",{className:o?"".concat(x.user__unFollow," ").concat(x.loading):x.user__unFollow,disabled:Boolean(o),onClick:()=>{return e=a.id,void c((0,l.PY)(e));var e},children:(0,S.jsx)("span",{children:"Unfollow"})}),!a.followed&&_&&(0,S.jsx)("button",{className:o?"".concat(x.user__follow," ").concat(x.loading):x.user__follow,disabled:Boolean(o),onClick:()=>{return e=a.id,void c((0,l.e6)(e));var e},children:(0,S.jsx)("span",{children:"Follow"})})]})]})};var M,F=t(475),D=t(858);function P(){return P=Object.assign?Object.assign.bind():function(e){for(var s=1;s<arguments.length;s++){var t=arguments[s];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},P.apply(null,arguments)}function K(e,s){let{title:t,titleId:n,...l}=e;return r.createElement("svg",P({width:9,height:6,viewBox:"0 0 9 6",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",ref:s,"aria-labelledby":n},l),t?r.createElement("title",{id:n},t):null,M||(M=r.createElement("path",{d:"M4.5 5.5L9 0.5H0L4.5 5.5Z",fill:"currentColor",fillOpacity:.6})))}const B=r.forwardRef(K),O=(t.p,e=>{const{option:{value:s,title:t},onClick:n,selectedItem:l}=e,a=(0,r.useRef)(null);return(0,r.useEffect)((()=>{const e=a.current;if(!e)return;const t=t=>{document.activeElement===e&&"Enter"===t.key&&n(s)};return e.addEventListener("keydown",t),()=>{e.removeEventListener("keydown",t)}}),[s,n]),(0,S.jsx)("li",{className:x.option,value:s,onClick:(o=s,()=>{n(o)}),tabIndex:0,"data-testid":"select-option-".concat(s),"aria-selected":l,ref:a,children:t});var o}),Y=e=>{const{mode:s="rows",options:t,placeholder:n,selected:l,onChange:a,onClose:o}=e,[i,_]=(0,r.useState)(!1),c=(0,r.useRef)(null),u=(0,r.useRef)(null);(0,r.useEffect)((()=>{const e=e=>{var s;const{target:t}=e;t instanceof Node&&(null===(s=c.current)||void 0===s||!s.contains(t))&&(i&&(null===o||void 0===o||o()),_(!1))};return window.addEventListener("click",e),()=>{window.removeEventListener("click",e)}}),[o]),(0,r.useEffect)((()=>{const e=u.current;if(!e)return;const s=e=>{"Enter"===e.key&&_((e=>!e))};return e.addEventListener("keydown",s),()=>{e.removeEventListener("keydown",s)}}),[]);const d=e=>{_(!1),null===a||void 0===a||a(e)};return(0,S.jsxs)("div",{className:x.selectWrapper,ref:c,"data-is-active":i,"data-mode":s,"data-testid":"selectWrapper",children:[(0,S.jsxs)("div",{className:x.placeholder,"data-selected":!(null===l||void 0===l||!l.value),onClick:()=>{_((e=>!e))},role:"button",tabIndex:0,ref:u,children:[(null===l||void 0===l?void 0:l.title)||n,(0,S.jsx)("div",{className:x.arrow,children:(0,S.jsx)(B,{className:x.arrow__image})})]}),i&&(0,S.jsx)("ul",{className:x.select__list,"data-testid":"selectDropdown",children:t.map((e=>{const s=e.title===(null===l||void 0===l?void 0:l.title);return(0,S.jsx)(O,{option:e,onClick:d,selectedItem:s},e.value)}))})]})};var H=t(86);const W=[{title:"All",value:"null"},{title:"Followed",value:"true"},{title:"Unfollowed",value:"false"}],Z=[{title:"5",value:"5"},{title:"10",value:"10"},{title:"20",value:"20"},{title:"30",value:"30"},{title:"40",value:"40"},{title:"50",value:"50"},{title:"60",value:"60"},{title:"70",value:"70"},{title:"80",value:"80"}],z=()=>{const e=(0,r.useContext)(E.D),s=(0,n.j)(),{register:t,handleSubmit:a,reset:o}=(0,D.mN)({}),c=(0,n.G)(i),u=(0,n.G)(_),d=(0,n.G)(v),m=(0,n.G)(h),[g,p]=(0,F.ok)({count:c.toString(),page:u.toString(),term:m,friend:d}),f=g.get("term")||"";(0,r.useEffect)((()=>{o({term:f})}),[f,o]);const[j,w]=(0,r.useState)(g.get("friend")||"null"),b=W.find((e=>e.value===j)),[N,U]=(0,r.useState)(g.get("count")||"5"),C=Z.find((e=>e.value===N));let y=k()(x.select__friend,{[x.light]:"light"===e,[x.dark]:"dark"===e}),G=k()(x.select__count,{[x.light]:"light"===e,[x.dark]:"dark"===e}),L=k()(x.users__form,x["form-users"],{[x.light]:"light"===e,[x.dark]:"dark"===e});const I=a((e=>{s((0,l.$L)(j)),s((0,l.n6)(e.term)),s((0,l.Ir)(1)),s((0,l.cU)(+N)),JSON.stringify(e),p({count:N,page:"1",term:e.term,friend:j}),s((0,l.lo)({count:N,page:"1",term:e.term,friend:j}))}));return(0,S.jsxs)("form",{onSubmit:I,className:L,children:[(0,S.jsx)("div",{className:x["form-users__column"],children:(0,S.jsxs)("div",{className:x["form-users__input"],children:[(0,S.jsx)("span",{children:"Name: "}),(0,S.jsx)("input",{type:"text",...t("term"),placeholder:"Enter name..."})]})}),(0,S.jsx)("div",{className:x["form-users__column"],children:(0,S.jsxs)("div",{className:y,children:[(0,S.jsx)("span",{children:"Filter: "}),(0,S.jsx)(Y,{mode:"rows",options:W,selected:b||W[0],onChange:e=>{w(e),(0,l.$L)(e)}})]})}),(0,S.jsx)("div",{className:x["form-users__column"],children:(0,S.jsxs)("div",{className:G,children:[(0,S.jsx)("span",{children:"Users on page: "}),(0,S.jsx)(Y,{mode:"cells",options:Z,selected:C||Z[0],onChange:e=>{U(e),(0,l.cU)(+e)}})]})}),(0,S.jsx)("div",{className:x["form-users__column"],children:(0,S.jsx)(H.J,{type:"submit",className:x["form-users__button"],children:"Search"})})]})};var Q=t(62);const R=(e,s)=>{if(null===e)return[];let t=Math.ceil(e/s),r=[];for(let n=1;n<=t;n++)r.push(n);return r},A=()=>{const e=(0,r.useContext)(E.D),s=(0,n.j)(),t=(0,n.G)(a),w=(0,n.G)(o),b=(0,n.G)(i),N=(0,n.G)(_),U=(0,n.G)(c),y=(0,n.G)(u),G=(0,n.G)(d),L=(0,n.G)(m),M=(0,n.G)(g),D=(0,n.G)(p),P=(0,n.G)(v),K=(0,n.G)(h),[B,O]=(0,F.ok)({count:b.toString(),page:N.toString(),term:K,friend:P}),Y=(0,r.useMemo)((()=>R(w,b)),[w,b]),H=B.get("count")||"10",W=B.get("page")||"1",Z=B.get("term")||"",A=B.get("friend")||"null";(0,r.useEffect)((()=>{s((0,l.$L)(A)),s((0,l.n6)(Z)),s((0,l.Ir)(+W)),s((0,l.cU)(+H)),O({count:H,page:W,term:Z,friend:A}),s((0,l.lo)({count:H,page:W,term:Z,friend:A}))}),[H,s,A,W,O,Z]);const J=(0,n.G)(f);let $=k()(x.users,{[x.light]:"light"===e,[x.dark]:"dark"===e});return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsxs)("div",{className:$,children:[(0,S.jsx)(z,{}),null!==t&&t.length>0?(0,S.jsx)(C,{pages:Y,handleSetPage:e=>{s((0,l.Ir)(e)),O({count:b.toString(),page:e.toString(),term:Z,friend:A}),s((0,l.lo)({count:b.toString(),page:e.toString(),term:Z,friend:A}))},currentPage:+W}):"",(0,S.jsxs)("div",{className:x.users__bottom,children:["loading"===U&&(0,S.jsx)("div",{className:x.users__loading,children:(0,S.jsx)("img",{src:Q,alt:"Loading..."})}),null!==t&&t.length>0&&"resolved"===U?t.map((e=>{const s=J.find((s=>s===e.id));return(0,S.jsx)(I,{user:e,followingId:s},e.id)})):"loading"!==U&&(0,S.jsx)("div",{className:x.users__no,children:"No users found"})]})]}),"rejected"===U&&(0,S.jsx)(j.y,{errorMessage:y}),"rejected"===G&&(0,S.jsx)(j.y,{errorMessage:L}),"rejected"===M&&(0,S.jsx)(j.y,{errorMessage:D})]})}},605:(e,s,t)=>{e.exports=t.p+"static/media/profile__avatar.082c8bb9fef786605356.png"}}]);
//# sourceMappingURL=746.ddf48834.chunk.js.map