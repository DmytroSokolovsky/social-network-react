"use strict";(self.webpackChunksocial_network_app=self.webpackChunksocial_network_app||[]).push([[66],{66:(a,e,s)=>{s.r(e),s.d(e,{default:()=>p});var t=s(43);const c={chat:"Chat_chat__5Eo3A",dark:"Chat_dark__njcHV",chat__body:"Chat_chat__body__SHuX6",chat__messages:"Chat_chat__messages__7b7rV",chat__warn:"Chat_chat__warn__GwLXO",chat__message:"Chat_chat__message__nH8fo",user:"Chat_user__7zjHR",chat__userPhoto:"Chat_chat__userPhoto__s4B3z",chat__userName:"Chat_chat__userName__YpgzR",chat__textMessage:"Chat_chat__textMessage__Uo-UU",chat__bottom:"Chat_chat__bottom__8KP4y",chat__textarea:"Chat_chat__textarea__4f2B-",chat__send:"Chat_chat__send__4+7WY",disabled:"Chat_disabled__4toPX",light:"Chat_light__yDseb"};var _=s(945),r=s(503);const h=a=>a.chat.messages,l=a=>a.chat.chatStatus;var n=s(587),o=s(216),i=s(605),d=s(38),m=s(139),u=s.n(m),x=s(579);const j=t.memo(t.forwardRef(((a,e)=>{let{message:s,photo:t,userId:r,userName:h}=a;const l=(0,_.G)(d.OX),n=(0,o.Zp)(),m=r===l,j=a=>{n("/profile/".concat(a),{replace:!0})};let g=u()(c.chat__message,{[c.user]:m});return(0,x.jsxs)(x.Fragment,{children:[!m&&(0,x.jsxs)("div",{className:g,ref:e,children:[(0,x.jsx)("div",{className:c.chat__column,children:(0,x.jsx)("div",{className:c.chat__userPhoto,onClick:()=>j(r),children:t?(0,x.jsx)("img",{src:t,alt:"".concat(h,"'s avatar")}):(0,x.jsx)("img",{src:i,alt:"".concat(h,"'s avatar")})})}),(0,x.jsxs)("div",{className:c.chat__column,children:[(0,x.jsx)("div",{className:c.chat__userName,children:h}),(0,x.jsx)("div",{className:c.chat__textMessage,children:s})]})]}),m&&(0,x.jsxs)("div",{className:g,ref:e,children:[(0,x.jsxs)("div",{className:c.chat__column,children:[(0,x.jsx)("div",{className:c.chat__userName,children:h}),(0,x.jsx)("div",{className:c.chat__textMessage,children:s})]}),(0,x.jsx)("div",{className:c.chat__column,children:(0,x.jsx)("div",{className:c.chat__userPhoto,onClick:()=>j(r),children:t?(0,x.jsx)("img",{src:t,alt:"".concat(h,"'s avatar")}):(0,x.jsx)("img",{src:i,alt:"".concat(h,"'s avatar")})})})]})]})}))),g=()=>{const a=(0,_.G)(d.jb),e=(0,_.G)(h),s=(0,t.useRef)(null),[r,l]=(0,t.useState)(!0);(0,t.useEffect)((()=>{var a;r&&(null===(a=s.current)||void 0===a||a.scrollIntoView({behavior:"smooth"}))}),[e,r]);return(0,x.jsxs)("div",{className:c.chat__messages,onScroll:a=>{const e=a.currentTarget;Math.abs(e.scrollHeight-e.scrollTop)-e.clientHeight<300?!r&&l(!0):r&&l(!1)},children:[!a&&(0,x.jsx)("div",{className:c.chat__warn,children:"To have access to chat you chould sign in!"}),a&&e.map(((a,t)=>(0,x.jsx)(j,{...a,ref:t===e.length-1?s:null},t)))]})};var v=s(86);const N=()=>{const a=(0,_.j)(),[e,s]=(0,t.useState)(""),h=(0,_.G)(l);let n=u()(c.chat__send,{[c.disabled]:"ready"!==h});return(0,x.jsxs)("div",{className:c.chat__bottom,children:[(0,x.jsx)("div",{className:c.chat__textarea,children:(0,x.jsx)("textarea",{className:"textarea",placeholder:"Enter your message...",onChange:a=>{s(a.target.value)},value:e})}),(0,x.jsx)(v.J,{disabled:"ready"!==h,type:"submit",onClick:()=>{e&&(a((0,r._z)(e)),s(""))},className:n,children:"Send"})]})};var C=s(569);const p=()=>{const a=(0,t.useContext)(C.D),e=(0,_.j)(),s=(0,_.G)(l);(0,t.useEffect)((()=>(e((0,r._E)()),()=>{e((0,r.Ui)()),e((0,r.A3)())})),[e]);let h=u()(c.chat,{[c.light]:"light"===a,[c.dark]:"dark"===a});return(0,x.jsxs)(x.Fragment,{children:["error"===s&&(0,x.jsx)(n.y,{errorMessage:"Some error occured. Please, refresh the page"}),(0,x.jsx)("div",{className:h,children:(0,x.jsxs)("div",{className:c.chat__body,children:[(0,x.jsx)(g,{}),(0,x.jsx)(N,{})]})})]})}},605:(a,e,s)=>{a.exports=s.p+"static/media/profile__avatar.082c8bb9fef786605356.png"}}]);
//# sourceMappingURL=66.877bf05f.chunk.js.map